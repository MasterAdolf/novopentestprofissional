# Enumerando HTTP

**Buscamos:**

* Versões do Web Server;
* Tecnologias utilizadas;
* Métodos aceitos.



Podemos buscar versões do Web Server. Se identificamos que tem um IIS o sistema operacional possivelmente é um Windows. Da mesma forma que se temos um Apache provavelmente é um Linux. 

Temos as tecnologias utilizadas, o que está sendo executado nele, PHP, ASP, JAVA, etc. Isso é importante porque podemos ajustar a nossa ferramenta , ou o nosso script para buscar apenas o que já sabemos que tem no servidor. Com isso economizamos tempo, temos resultados mais assertivos e geramos menos ruido do lado do servidor. 

Outra ponto interessante que podemos buscar são os métodos aceitos como PUT, POST, etc.  Analisando os métodos que são aceitos no protocolo podemos subir, por exemplo, arquivos para o servidor. 



**Como ?**

* Portas Comuns;
* Versões do protocolo;
* Requisições;
* Utilitários utilizados.



O primeiro passo é buscar as portas abertas que estejam em execução rodando os serviços de HTTP. O administrador pode configurar um serviço HTTP em qualquer porta, mas as técnicas utilizadas são as mesmas, independente da porta. 

Depois verificamos a versão do protocolo. Vimos que podemos usar a versão HTTP/1.0 ou HTTP/1.1, o que vai mudar é a forma como  interagimos com ele. Lembrando que quando utilizamos a versão HTTP/1.1 precisamos passar o parâmetro "Host:”.

Com relação as requisições podemos utilizar o GET para requisitarmos algo. O HEAD para trazermos apenas o cabeçalho, ou o OPTIONS para vermos os métodos permitidos. 

Quanto aos utilitários podemos usar o Netcat (nc), curl , telnet, ou podemos criar nosso próprio script.



**Vamos para prática**

Utilizamos o comando abaixo para conectar no servidor:

```bash
$ nc -v businesscorp.com.br 80
```

Em seguida fazemos a requisição (HEAD) passando o parâmetro abaixo e clicando no final a tecla <ENTER> duas vezes.  Com isso temos informações interessantes sobre o servidor.

```bash
HEAD / HTTP/1.0
```

Podemos usar o “OPTIONS” para verificarmos os métodos como na captura abaixo. 

```bash
nc -v businesscorp.com.br 80
OPTIONS /desec HTTP/1.0
```

Podemos alterar a versão para “HTTP/1.1” , no lugar do 1.0.  Nesse caso precisamos passar o parâmetro "Host:" . Um dos usos para o "HTTP/1.1" é quando existe a hospedagem de mais de um site no mesmo IP e o servidor direciona para o site correto baseado no parâmetro "HOST" passado na requisição.

```bash
nc -v businesscorp.com.br 80
GET / HTTP/1.1
Host: businesscorp.com.br
```

Podemos identificar as tecnologias e versões que estão rodando no servidor fazendo a requisição "HEAD". Nesse caso vamos utilizar o nosso ambiente de servidores através da  VPN privada da DESEC:

```bash
nc -v 172.16.1.60 80
HEAD / HTTP/1.0
```

No caso acima identificamos que o servidor roda "ASP".

Vamos fazer novamente uma requisição "HEAD" só que agora solicitando um arquivo "aspx" que não existe. Assim podemos obter mais informações de cookies, sessões, além da versão da tecnologia que está sendo utilizada naquele alvo:

````bash
nc -v 172.16.1.60 80
HEAD /naoexiste.aspx HTTP/1.0
````

 